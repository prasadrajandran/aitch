var T=(e,o)=>{Object.entries(o).forEach(([r,i])=>{switch(r){case"className":{i.split(/\s{1,}/).forEach(a=>{let t=a.trim();t&&e.classList.add(t)});break}case"style":Object.assign(e.style,i);break;case"dataset":Object.assign(e.dataset,i);break;default:if(r.startsWith("[")&&r.endsWith("]")){let t=r.substring(1,r.length-1);i===!1?e.removeAttribute(t):e.setAttribute(t,i===!0?"":i)}else e[r]!==i&&(e[r]=i)}})};var P=e=>{let o=new Text(""),r=!1,i=()=>{r&&(o.replaceWith(e),r=!1)};return{node:e,classMap:a=>{Object.entries(a).forEach(([t,p])=>{p?e.classList.add(t):e.classList.remove(t)})},attrMap:a=>{Object.entries(a).forEach(([t,p])=>{p===!1?e.removeAttribute(t):e.setAttribute(t,p===!0?"":p)})},dataMap:a=>{Object.entries(a).forEach(([t,p])=>{p===!1?delete e.dataset[t]:e.dataset[t]=p===!0?"":p})},text:a=>{e.textContent!==a&&(e.textContent=a)},style:a=>T(e,{style:a}),attrs:a=>T(e,a),show:()=>{e.style.removeProperty("display"),i()},hide:()=>{e.style.setProperty("display","none"),i()},remove:()=>{r||(e.replaceWith(o),r=!0)}}};var d=e=>!!(e&&(e.constructor===Object||Object.getPrototypeOf(e)===null));var b="__cI4Mp6yr0__";var D=e=>d(e)&&"id"in e&&e.id===b;var I=e=>d(e)&&"$id"in e&&e.$id===x;var x="__PzroJBb1g__",f=e=>`data-FHF7Sj5kD1S-${e}`,y=e=>`<template ${f(e)}></template>`,R=class extends Set{run(){this.forEach(o=>{o()===!1&&this.delete(o)})}},C=(e,o)=>{let r=new Map,i=document.createElement("template"),a=()=>{let p=0;return e.reduce((E,l,s)=>{if(s===0)return l;let m=o[s-1],n="";return Array.isArray(m)?(n=`\${[${m.map((c,u)=>u).join(",")}]}`,p+=m.length):(n=`\${${p}}`,p++),`${E}${n}${l}`},"")},t=-1;return i.innerHTML=e.reduce((p,E,l)=>{let s=`${p}${E}`;if(!(l in o))return s;let m=o[l];return[].concat(m).forEach(n=>{t++;let c=typeof n;if(c==="string"||c==="number"||c==="boolean")s+=n;else if(c==="function")r.set(t,n),s+=f(t);else if(n instanceof Node)r.set(t,n),s+=y(t);else if(I(n))r.set(t,n.$node),s+=y(t);else if(D(n))r.set(t,n),s+=n.def.type==="attr"?f(t):y(t);else if(d(n))r.set(t,n),s+=f(t);else throw new Error(`Invalid template expression at index ${t}:
`+a())}),s},"").trim(),{taggedTemplate:i,taggedExps:r,createErrorTemplate:a}},S=({taggedTemplate:e,taggedExps:o,createErrorTemplate:r})=>{let i=e.content.cloneNode(!0),a=new Map,t=[],p=new R;o.forEach((l,s)=>{let m=f(s),n=i.querySelector(`[${m}]`);if(!n){let c=document.createElement("template");throw c.append(i),console.error(c),new Error(`Unable to interpolate expression at index ${s}. This could have occurred because the previous expression was mismatched.
${r()}`)}if(n.removeAttribute(m),l instanceof Node)n.replaceWith(l);else if(D(l)){let{def:c,args:u}=l,g=a.get(c)||[];g.push({node:n,index:s,args:u}),a.set(c,g)}else if(typeof l=="function"){let c=P(n);t.push(c),p.add(()=>l(c))}else T(n,l)});let E=new Proxy(Object.defineProperties({},{$id:{value:x,enumerable:!1},$cb:{value:p,enumerable:!1},$node:{value:i.childNodes.length===1?i.childNodes[0]:i,enumerable:!1}}),{defineProperty(l,s,m){if(typeof s=="string"&&s.startsWith("$"))throw new Error(`The "$" prefix is reserved and cannot be used to declare additional properties on a parsed template: "${s}"`);if(s in l)throw new Error(`Duplicate parsed template key: "${String(s)}"`);return Object.defineProperty(l,s,m),!0}});return t.forEach(l=>Object.defineProperty(l,"tpl",{value:E})),a.forEach((l,{callback:s})=>{s(E,l)}),E},h=(e,...o)=>S(C(e,o));var A=e=>Object.entries(e).map(([o,r])=>{let i=Object.entries(r).reduce((a,[t,p])=>{if(typeof p=="string"){let E=t.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`);return a+=`${E}:${p};`}return A(r)},"");return`${o}{${i}}`}).join("");export{T as attrs,h,h as html,A as style};
//# sourceMappingURL=index.js.map
